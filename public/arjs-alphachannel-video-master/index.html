<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body>
    <a-scene
      vr-mode-ui="enabled: false;"
      loading-screen="enabled: true;"
      renderer="logarithmicDepthBuffer: true;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      id="scene"
      embedded
      log>
      <a-assets>
        <video
          id="alpha"
          autoplay
          loop="true"
          preload="auto"
          src="assets/cricket.mp4"></video>
      </a-assets>

      <!-- Using the asset management system. -->
      <a-marker
        id="animated-marker"
        type="pattern"
        preset="custom"
        url="https://arhorizon.s3.ap-south-1.amazonaws.com/markerPattFile/markerPattern1706165770364.patt"
        smooth="true"
        smoothcount="10"
        smoothtolerance="0.1"
        smooththreshold="20">
        <a-video
          id="vid"
          rotation="-90.584 -3.936 1.509"
          position="0 -10 0"
          scale="5 5 5"
          vidhandler
          src="#alpha">
        </a-video>
      </a-marker>
    </a-scene>

    <script>
      AFRAME.registerComponent("vidhandler", {
        init: function () {
          this.toggle = false;
          document.querySelector("#vid").pause(); //reference to the video
        },
        tick: function () {
          if (document.querySelector("a-marker").object3D.visible == true) {
            if (!this.toggle) {
              this.toggle = true;
              document.querySelector("#vid").play();
            }
          } else {
            this.toggle = false;
            document.querySelector("#vid").pause();
          }
        },
      });

      function hideOrShow(id) {
        var x = document.getElementById(id);
        if (x.style.display === "none") {
          x.style.display = "block";
        } else {
          x.style.display = "none";
        }
      }
      // Prevent click event on video
      var videoElement = document.getElementById("alpha");
      videoElement.addEventListener("click", function (event) {
        event.preventDefault();
      });
    </script>
  </body>
</html>
